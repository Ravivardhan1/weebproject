// Hardcoded stories
const stories = {
    horror: [
        { title: "The Haunted House",  content: "Once upon a time, in a dark forest, there was a haunted house that no one dared to enter. The villagers spoke in hushed tones about the eerie lights flickering through its windows at night and the whispers that floated through the air whenever someone got too close.  One stormy evening, a brave traveler named Arjun arrived in the village. He had heard the legends and was determined to uncover the truth. Ignoring the villagers warnings, he set off toward the house with only a lantern and his courage. As he pushed open the creaky door, a cold wind rushed past him, carrying the faint scent of something old and forgotten.  Inside, the air was thick with dust, and the wooden floor groaned under his steps. He walked through the grand hall, where faded portraits stared at him with hollow eyes. A sudden noise made him jump—it sounded like footsteps from the floor above. Swallowing his fear, he climbed the spiral staircase, his lantern flickering with each step.  At the end of the hallway, he found a room with a single candle burning. On the table lay an old diary. As he flipped through its yellowed pages, he learned about a young girl named Mira who once lived in the house. She had vanished mysteriously, leaving only this diary behind. The last entry read 'If anyone finds this, please help me. I am trapped.' Just then, the candle flickered violently, and a whisper filled the room:'Help me' Arjun spun around, his heart pounding. The door slammed shut. Was Mira still here, waiting to be freed?  And if so... how?  " },

        { title: "The Ghostly Figure", content:"In an old mansion on the outskirts of town, a ghostly figure appeared every midnight. The house had long been abandoned, its walls covered in ivy, its windows shattered by time. Locals spoke in hushed whispers about the spirit that roamed its halls, but none dared to step inside.  One stormy night, a young journalist named Aryan decided to investigate. He had always dismissed ghost stories as mere superstition, and he was determined to prove this one false. Armed with a flashlight and a camera, he entered the mansion just as the clock struck twelve.  The air inside was damp and heavy with the scent of decay. Aryan moved cautiously, his footsteps echoing through the empty corridors. As he reached the grand staircase, he felt a sudden chill. A whisper, barely audible, sent shivers down his spine.  Then, he saw it. A shadowy figure at the top of the stairs—tall, draped in tattered clothing, its face obscured. Aryan’s heart pounded as the figure slowly descended. The air grew colder with every step it took.“Who are you?” Aryan called out, his voice trembling.  A low, sorrowful moan filled the space. Suddenly, the ghost vanished, leaving behind only a faint glow. Gathering his courage, Aryan followed the light to a small, hidden room. Inside, he discovered a dusty diary. As he flipped through the pages, he learned the tragic tale of Eleanor Sinclair—a woman who had been betrayed and murdered in the mansion over a century ago.  Realizing the spirit sought justice, Aryan vowed to uncover the truth. The next morning, he published Eleanor’s story, exposing the crime buried in history. The town finally acknowledged her fate, and from that night onward, the ghostly figure was never seen again.  Aryan had not just encountered a ghost—he had freed a restless soul.  Would you like any changes to the story? " },
        { title: "The Ghostly Figure", content: "In an old mansion on the outskirts of town, a ghostly figure appeared every midnight..." },
        { title: "The Cursed Doll", content: "  In a quiet town, hidden within an antique shop, sat a peculiar doll. With glassy blue eyes and a faded red dress, it looked ordinary—except for the eerie legend attached to it. The townspeople believed that anyone who owned the doll suffered terrible misfortune.  One day, Maya, a young collector of vintage items, stumbled upon the shop. The doll caught her attention immediately. The shopkeeper, an old man with wary eyes, warned her, “That doll is cursed. Leave it be.” But Maya dismissed the superstition and bought it anyway.  From the moment she brought it home, strange things began to happen. Her cat hissed and refused to enter the room where the doll was placed. That night, she heard whispers, though she was alone. The next day, her bookshelf collapsed without reason, and she narrowly escaped being injured.  Convinced it was just coincidence, Maya ignored the warnings—until the nightmares began. She dreamt of a little girl crying, whispering, “Help me.” Each night, the voice grew clearer. Desperate for answers, Maya researched the doll’s origins.  She discovered that decades ago, a girl named Eliza had owned it. She had died mysteriously, and ever since, the doll had changed hands, bringing misfortune to every owner. Determined to break the curse, Maya returned to the antique shop and confronted the shopkeeper.  He sighed and revealed the truth—Eliza’s spirit was trapped in the doll, seeking justice. Maya found the girl’s grave and placed the doll there, whispering, “You’re free now.”  That night, for the first time, Maya slept peacefully. The cursed doll was never seen again." }
    ],
    comedy: [
        { title: "The Funny Clown", content: "One rainy evening, in a quiet little town, a clown walked into a bar. Dressed in a bright red suit, oversized shoes, and a painted smile, he looked completely out of place. The regulars turned to stare, unsure of what to make of him.Without hesitation, the clown leaped onto a stool and declared, “Why did the tomato turn red? Because it saw the salad dressing!” The room fell silent for a moment—then burst into laughter. Even the grumpy bartender cracked a smile.Encouraged, the clown juggled peanuts, performed a silly dance, and pulled a rubber chicken from his pocket. The gloomy atmosphere melted away, replaced by chuckles and cheers. People who had been sipping their drinks in silence were now wiping tears of laughter from their eyes.A man at the counter, who had entered the bar looking defeated, couldn’t help but grin. “You should be on TV,” he said between laughs.The clown bowed dramatically. “Laughter is free, and I’m here to spread it!”As the night went on, the bar transformed into a stage for joy. Strangers exchanged jokes, the bartender handed out drinks with a chuckle, and for once, no one cared about their worries.Just before midnight, the clown tipped his hat and said, “Remember, laughter is the best medicine!” Then, as mysteriously as he had arrived, he disappeared into the night.The next day, the townspeople searched for him, but no one knew where he had come from. Some said he was just a performer, while others believed he was a wandering spirit of joy. But one thing was certain—no one ever forgot the night the funny clown walked into the bar." },
        { title: "The Silly Cat", content: "Whiskers was no ordinary cat—he was the silliest feline in the neighborhood. From knocking over vases to getting stuck in boxes, he was always up to some mischief. But his funniest adventure began one lazy afternoon when he discovered his own tail.It started with a flick. As Whiskers lay in the sun, his tail twitched, catching his attention. Curious, he pounced, but it slipped away. Determined, he spun in circles, trying to catch the wiggly thing that seemed to be teasing him.Round and round he went, faster and faster. His little paws scrambled on the wooden floor, his ears flopping as he twirled. “Almost got it!” he thought, but his tail always stayed just out of reach.Then—THUD! Whiskers wobbled to a stop, his eyes spinning like marbles. He plopped onto his back, staring at the ceiling, completely dizzy. The world around him seemed to sway, and even the lamp in the corner looked like it was doing a dance. His owner, Mia, walked in and burst into laughter. “Oh, Whiskers! You silly cat!” she giggled, scooping him up. He let out a tiny meow, still too dazed to protest.After a few minutes of rest (and a treat to help him recover), Whiskers was back on his paws. But this time, he eyed his tail suspiciously. “You win this round,” he seemed to say, flicking it once before trotting off to find his next adventure.From that day on, Whiskers remained the silliest cat in town—but he never tried chasing his tail again. " },

        { title: "The Joke That Went Wrong", content: "Ron loved telling jokes. He believed humor could brighten anyone’s day. One evening, at a crowded café, he decided to share his latest joke with his friends. Clearing his throat, he announced, “Alright, listen to this one!”Everyone leaned in as Ron grinned and said, “Why don’t bicycles ever get tired? Because they’re two-tired!”Silence.Blank stares. A man sipped his coffee. A woman checked her phone. Even the waiter, who had been passing by, paused for a second—then walked away.Ron chuckled nervously. “Get it? Two-tired? Like… too tired?” Still, nothing. A cricket outside chirped, as if mocking him. His best friend, Sam, finally broke the silence. “Uh… yeah, I guess that’s… funny?” he said uncertainly.Ron’s face turned red. How could his joke fail so badly? He had imagined laughter, maybe even applause! Determined to fix the awkward moment, he tried again. “Okay, okay, what about this? Why did the scarecrow win an award?” No one answered.“Because he was outstanding in his field!” A single chuckle came from the corner of the café, but the rest remained silent. Ron sighed. Maybe he wasn’t as funny as he thought. Just as he was about to give up, a kid at the next table burst out laughing. “That was hilarious!” the boy giggled. Soon, his laughter spread, and one by one, others started chuckling too. Ron grinned, relieved. Maybe his joke had gone wrong at first, but in the end, laughter had won. Would you like any modifications? 😊" }
    ],

    fantasy: [
        { title: "The Dragon's Lair", content: "A brave knight entered the dragon's lair to save the princess..." },
        { title: "The Magic Wand", content: "A young wizard found a magic wand and discovered its powers..." },
        { title: "The Enchanted Forest", content: "A group of friends discovered a forest full of magical creatures..." }
    ],
    crime: [
        { title: "The Stolen Jewel", content: "A detective solved the mystery of the stolen jewel..." },
        { title: "The Bank Heist", content: "A group of thieves planned the perfect bank heist..." },
        { title: "The Missing Heirloom", content: "A family heirloom went missing under mysterious circumstances..." }
    ],
    thriller: [
        { title: "The Shadow in the Dark", content: "A woman heard strange noises in her house at night..." },
        { title: "The Missing Person", content: "A man disappeared without a trace, and the investigation began..." },
        { title: "The Mysterious Letter", content: "A letter arrived with a cryptic message..." }
    ]
};

        


let currentGenreStories = [];
let currentPage = 1;
const storiesPerPage = 1;

// Login Button
document.getElementById('login-btn').addEventListener('click', () => {
    const username = document.getElementById('username').value;
    const age = document.getElementById('age').value;

    if (username && age) {
        document.getElementById('login-section').classList.add('hidden');
        document.getElementById('genre-section').classList.remove('hidden');
    } else {
        alert('Please enter your name and age.');
    }
});

// Genre Selection Button
document.getElementById('select-genre-btn').addEventListener('click', () => {
    const genre = document.getElementById('genre-select').value;
    currentGenreStories = stories[genre] || [];

    if (currentGenreStories.length > 0) {
        document.getElementById('genre-section').classList.add('hidden');
        document.getElementById('story-section').classList.remove('hidden');
        displayStories(currentPage);
        setupPagination();
    } else {
        alert('No stories found for this genre.');
    }
});

// Display Stories
function displayStories(page) {
    const storyCards = document.getElementById('story-cards');
    storyCards.innerHTML = '';

    const start = (page - 1) * storiesPerPage;
    const end = start + storiesPerPage;
    const paginatedStories = currentGenreStories.slice(start, end);

    paginatedStories.forEach(story => {
        const card = `
            <div class="col-md-8 offset-md-2">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">${story.title}</h5>
                        <p class="card-text">${story.content}</p>
                    </div>
                </div>
            </div>
        `;
        storyCards.innerHTML += card;
    });
}

// Setup Pagination
function setupPagination() {
    const pagination = document.getElementById('pagination');
    pagination.innerHTML = '';

    const pageCount = Math.ceil(currentGenreStories.length / storiesPerPage);

    for (let i = 1; i <= pageCount; i++) {
        const li = document.createElement('li');
        li.classList.add('page-item');
        if (i === currentPage) li.classList.add('active');

        const a = document.createElement('a');
        a.classList.add('page-link');
        a.href = '#';
        a.textContent = i;

        a.addEventListener('click', () => {
            currentPage = i;
            displayStories(currentPage);
            updatePagination();
        });

        li.appendChild(a);
        pagination.appendChild(li);
    }
}

// Update Pagination Active State
function updatePagination() {
    const paginationItems = document.querySelectorAll('#pagination .page-item');
    paginationItems.forEach((item, index) => {
        if (index + 1 === currentPage) {
            item.classList.add('active');
        } else {
            item.classList.remove('active');
        }
    });
}

// Back Button
document.getElementById('back-btn').addEventListener('click', () => {
    document.getElementById('story-section').classList.add('hidden');
    document.getElementById('genre-section').classList.remove('hidden');
    currentPage = 1;
});

// Feedback Form Submission
document.getElementById('feedback-form').addEventListener('submit', (event) => {
    event.preventDefault();

    const rating = document.getElementById('rating').value;
    const comment = document.getElementById('comment').value;

    if (rating && comment) {
        alert('Thank you for your feedback!');
        document.getElementById('feedback-form').reset();
        // Redirect to the home page
        document.getElementById('story-section').classList.add('hidden');
        document.getElementById('login-section').classList.remove('hidden');
    } else {
        alert('Please fill out all fields.');
    }
});